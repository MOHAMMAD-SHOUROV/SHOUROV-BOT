// commands/murgi.js
module.exports.config = {
  name: "murgi",
  version: "1.0.2",
  permission: 2,
  credits: "shourov",
  prefix: false,
  description: "Send a series of styled messages (mention required).",
  category: "without prefix",
  usages: "[tag]",
  cooldowns: 5
};

module.exports.run = async function({ api, event, args, Users }) {
  try {
    const { threadID, messageID, mentions } = event;

    // get first mention id
    const mentionKeys = Object.keys(mentions || {});
    if (mentionKeys.length === 0) {
      return api.sendMessage("ржЖржкржирж┐ ржХрж╛ржХрзЗ ржЪрзБржжрждрзЗ ржЪрж╛ржи ржПржоржи 1 ржЬржиржХрзЗ @ржорзНржпрж╛ржирж╢ржи ржХрж░рждрзЗ рж╣ржмрзЗред", threadID, messageID);
    }
    const targetID = mentionKeys[0];
    const displayName = mentions[targetID] || (await Users.getNameUser(targetID));

    // build mention object required by API
    const mentionObject = [{ id: targetID, tag: displayName }];

    // array of captions/messages to send (taken & cleaned from your original)
    const messages = [
     "рж╕рзМрж░ржн'рж░ ржЪрзБржжрж╛ рж▓рзЛ"
"ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐ ЁЯе░ред"
ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржмрзЛржи рж░рзЗ ржЪрзБржжрж┐ ЁЯШН.."
"ржорж╛ржжрж╛рж░ржЪрзЛржж рждрж░ ржЖржорзНржорзБ ржкржо ржкржо ржЦрж╛ржВржХрж┐рж░ ржкрзЛ ЁЯР░"
"ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржнрзБржжрж╛рзЯ ржнрзБржжрж╛рзЯ ржХрж╛ржорж░ ржжрж┐ржорзБ  ЁЯТФ!"
"ржЦрж╛ржВржХрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ржХржерж╛ ржХ ржХржо ржХржо рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрзЗ ржмрж╛ржирж╛ржорзБ ржЖржЗржЯрзЗржо ржмрзЛржо "
"depression ржерзЗржХрзЗржУ рждрж░ ржорж╛ржЗрж░рзЗ ржЪрзБ*** ржжрж┐ ЁЯдм "
"рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЖржЪрж╛рж░ ржПрж░ рж▓рзЛржн ржжрзЗржЦрж┐ ржЪрзБржжрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ЁЯдм"
"ржмрж╛ржирзНржжрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржХржЪрж┐ ржмрзЛржирзЗрж░ ржнрзБржжрж╛ ржлрж╛ржХ ржХрж░ ржерзБрждрзБ ржжрж┐рзЯрзЗ ржнрзБржжрж╛рзЯ ржжржи ржбрзБржХрж╛ржорзБ ЁЯдЯ"
"ржмрж╛ржирзНржжрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ рждрж░ ржжрзБрж▓рж╛ ржнрж╛ржЗ ржПрж░ ржХрж╛ржирзНржжрзЗ ржлрзЗрж▓рзЗ  ЁЯдЭ"
"ржЙржлржлржл ржЦрж╛ржжрзНржжрж╛ржорж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржЖржорзНржорзБрж░ ржХрж╛рж▓рж╛ ржнрзБржжрж╛рзЯ ржЖржорж╛рж░ ржорж╛рж▓ ржЖржЙржЯ рждрж░ ржХржЪрж┐ ржмрзЛржи рж░рзЗ ржЙржкрзНрждрж╛ ржХрж░рзЗ ржПржмрж╛рж░ ржЪрзБржжржмрзЛ  ЁЯТЙред"
"ржЕржирж▓рж╛ржЗржирзЗ ржЧрж╛рж▓рж┐ ржмрж╛ржЬ рж╣рзЯрзЗ ржЧрзЗржЫржд ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ржПржоржи ржЪрзБржжрж╛ ржжрж┐ржорзБ рж▓рж╛ржЗржл ржЯрж╛ржЗржо ржоржирзЗ рж░рж╛ржЦржнрж┐  ржирзЯржи рждрж░ ржмрж╛ржк ржорж╛ржЧрж┐рж░ ржЫрзЗрж▓рзЗ ЁЯШШред"
"ржмрж╛рждрж┐ржЬрж╛ рж╢рзБржи рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж▓рзЗ рж░рж╛ржЧ ржХрж░ржмрж┐ ржирж╛ рждрзЛ ржЖржЪрзНржЫрж╛ ржЬрж╛ рж░рж╛ржЧ ржХрж░рж┐рж╕ ржирж╛ рждрж░ ржЖржорзНржорзБрж░ ржХрж╛рж▓рж╛ ржнрзБржжрж╛рзЯ ржЖрж░ ржЪрзБржжрж▓рж╛ржо ржирж╛ рждрзЛ ржмрзЛржи ржПрж░ ржЬрж╛ржорж╛ ржЯрж╛ ржЦрзБрж▓рзЗ ржжрзЗ  тЬЛ"
" рж╣рж╛ржЗ ржорж╛ржжрж╛рж░ржЪрзЛржж рждрж░ рждрж░ ржмрзНржпрж╛рж╢рж╛ ржЬрж╛рждрзЗрж░ ржЖржорзНржорзБ ржЯрж╛ рж░рзЗ ржЖржжрж░ ржХрж░рзЗ ржХрж░рзЗ ржЪрзБржжрж┐ "
"~ ржЪрзБржжрж╛ ржХрж┐ ржЖрж░рзЛ ржЦрж╛ржмрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓ ЁЯдЦ"
"ржЦрж╛ржВржХрж┐рж░ ржкрзЛрж▓рж╛ ЁЯе░ред"
"ржорж╛ржжрж╛рж░ржЪрзЛржжЁЯШН.."
"ржмрзНржпрж╛рж╕рзНржпрж╛рж░ ржкрзЛрж▓рж╛ ЁЯР░"
"ржмрзНржпрж╛рж╢рзНржпрж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛  ЁЯТФ!"
"ржкрждрж┐рждрж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ "
"depression ржерзЗржХрзЗржУ рждрж░ ржорж╛ржЗрж░рзЗ ржЪрзБ*** ржжрж┐ ЁЯдм "
"рждрж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐"
"ржирж╛ржЯ ржмрж▓рзНржЯрзБ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ЁЯдЯ"
"рждрж░ ржмрзЛржи рж░рзЗ ржкрж╛рзЯржЬрж╛ржорж╛ ржЦрзБрж▓рзЗ ржЪрзБржжрж┐ ЁЯдг"
"ржЙржорзНржоржорзНржорж╛ рждрж░ ржмрзЛржи ржПрж░ржХржЪрж┐ ржнрзБржжрж╛рзЯЁЯТЙред"
"DNA ржЯрзЗрж╖рзНржЯ ржХрж░рж╛ ржжрзЗржЦржмрж┐ ржЖржорж╛рж░ ржЪрзБржжрж╛ рждрзЗржЗ рждрж░ ржЬржирзНржоред"
"ржХрж╛ржорж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛  тЬЛ"
" ржмрж╛рж╕рзНржЯрзНрж░рж╛ржб ржПрж░ ржмрж╛ржЪрзНржЫрж╛ ржмрж╕рзНрждрж┐рж░ ржкрзЛрж▓рж╛ "
"~ ржЖржорж╛рж░ ржЬрж╛рж░ржЬ рж╢ржирзНрждрж╛ржиЁЯдЦ"
"Welcome ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ЁЯе░ред"
"рждрж░ ржХржЪрж┐ ржмрзЛржи ржПрж░ ржкржо ржкржоЁЯШН.."
"ржмрзНржпрж╛рж╕рзНржпрж╛рж░ ржкрзЛрж▓рж╛ ржХржерж╛ рж╢рзБржи рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ ржЧрж╛ржоржЫрж╛ ржкрзЗржЪрж┐рзЯрзЗЁЯР░"
"Hi рж╕рзМрж░ржн ржПрж░ ржЬрж╛рж░ржЬ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛  ЁЯТФ!"
"рзирзж ржЯрж╛ржХрж╛ ржП ржкрждрж┐рждрж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ " + "
"depression ржерзЗржХрзЗржУ рждрж░ ржорж╛ржЗрж░рзЗ ржЪрзБ*** ржжрж┐ ЁЯдм "
"ржмрж╕рзНрждрж┐рж░ ржЫрзЗрж▓рзЗ ржЕржирж▓рж╛ржЗржирзЗрж░ ржХрж┐ржВ" + "
"ржЯрзБржХрж╛ржЗ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ЁЯдЯ" + "
"рждрж░ ржЖржорзНржорзБ рж░рзЗ ржкрж╛рзЯржЬрж╛ржорж╛ ржЦрзБрж▓рзЗ ржЪрзБржжрж┐ ЁЯдг"
"ржЙржорзНржоржорзНржорж╛ рждрж░ ржмрзЛржи ржПрж░ржХржЪрж┐ ржнрзБржжрж╛рзЯЁЯТЙред"
"DNA ржЯрзЗрж╖рзНржЯ ржХрж░рж╛ ржжрзЗржЦржмрж┐ ржЖржорж╛рж░ ржЪрзБржжрж╛ рждрзЗржЗ рждрж░ ржЬржирзНржоред"
"рж╣рж┐ржЬрж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛  тЬЛ"
" ржмрж╕рзНрждрж┐рж░ржирзНржжрж╛рж▓рж╛рж▓ ржПрж░ ржмрж╛ржЪрзНржЫрж╛ ржмрж╕рзНрждрж┐рж░ ржкрзЛрж▓рж╛ "
"~ ржЖржорж╛рж░ ржЬрж╛рж░ржЬ рж╢ржирзНрждрж╛ржи ржЬрж╛ ржнрж╛ржЧЁЯдЦ"
"Welcome рж╢рзБрзЯрзЛрж░рзЗрж░ ржмрж╛ржЪрзНржЪрж╛ ЁЯе░ред"
"ржХрзБрждрзНрждрж╛рж░ ржмрж╛ржЪрзНржЫрж╛ рждрж░ ржХржЪрж┐ ржмрзЛржи ржПрж░ ржкржо ржкржоЁЯШН.."
"ржЦрж╛ржЩрзНржХрж┐рж░ржкрзЛрж▓рж╛ ржкрзЛрж▓рж╛ ржХржерж╛ рж╢рзБржи рждрж░ ржЖржорзНржорзБ рж░рзЗ ржЪрзБржжрж┐ ржЧрж╛ржоржЫрж╛ ржкрзЗржЪрж┐рзЯрзЗЁЯР░"
"Hi рж╕рзМрж░ржн ржПрж░ ржЬрж╛рж░ржЬ ржкрзЛрж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛  ЁЯТФ!"
"ржЦрж╛ржирзНржХрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ "
"рждрзЛрж░ ржмрж╛ржкрзЗ рждрзЛрж░ ржирж╛ржирж╛ред ЁЯдм "
"ржмрж╕рзНрждрж┐рж░ ржЫрзЗрж▓рзЗ рждрзЛрж░ ржмржЗржирж░рзЗ ржорзБрж╕рж▓ржорж╛ржирж┐ ржжрж┐ржорзБред"
"ржЯрзБржХрж╛ржЗ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ржорзЛржмрж╛ржЗрж▓ ржнрж╛ржЗржмрзНрж░рзЗрж╢ржи ржХржЗрж░рж╛ рждрзБрж░ ржХржЪрж┐ ржмрзЛржи ржПрж░ ржкрзБржХржЯрж┐рждрзЗ ржнрж░ржмрзЛредЁЯдЯ"
"рждрзЛрж░ ржорзБржЦрзЗ рж╣рж╛ржЗржЧрзНржпрж╛ ржжрж┐ржорзБред ЁЯдг"
"ржХрзБрждрзНрждрж╛рж░ ржкрзБржХржЯрж┐ ржЪрж╛ржЯрж╛ржорзБЁЯТЙред"
"рждрж░ ржЖржорзНржорзБрж░ рж╣рзЛржЧрж╛ ржжрж┐рзЯрж╛ ржЯрзНрж░рзЗржи ржнржЗрж░рж╛ ржжрж┐ржорзБредред"
"рж╣рж┐ржЬрж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рж╣рж╛рждрж┐рж░ рж▓рзНржпрж╛ржУрзЬрж╛ ржжрж┐рзЯрж╛ рждрж░ ржорж╛рзЯрзЗрж░рзЗ ржЪрзБржжрзБржоред  тЬЛ"
"рждрж░ ржмрзЛржи ржнрзЛржжрж╛ ржЫрж┐рж▓рзНрж▓рж╛ рж▓ржмржг рж▓рж╛ржЧрж╛рзЯ ржжрж┐ржорзБред "
"~ ржЖржорж╛рж░ ржлрж╛ржЯрж╛ ржХржирзНржбржорзЗрж░ ржлрж╕рж▓ред ржЬрж╛ ржнрж╛ржЧЁЯдЦ"
"Welcome рж╢рзБрзЯрзЛрж░рзЗрж░ ржмрж╛ржЪрзНржЪрж╛ ЁЯе░ред"
"ржХрзБрждрзНрждрж╛рж░ ржмрж╛ржЪрзНржЫрж╛ рждрж░ ржмрзМржи ржнрзЛржжрж╛рзЯ ржорж╛ржЧрзБрж░ ржорж╛ржЫ ржЪрж╛рж╖ ржХрж░рзБржоредЁЯШН.."
"ржЦрж╛ржЩрзНржХрж┐рж░ржкрзЛрж▓рж╛ ржкрзЛрж▓рж╛ рждрж░ ржмрзЛржирзЗрж░  рж╣рзЛржЧрж╛рзЯ ржЗржиржкрзБржЯ,┬арждрж░ ржорж╛рзЯрзЗрж░ ржнрзЛржжрж╛рзЯ ржЖржЙржЯржкрзБржЯредЁЯР░"
"рждрж░ ржорж╛рзЯрзЗрж░ ржнрзЛржжрж╛ ржмрзЛржорзНржмрж╛ржЗ ржорж░рж┐ржЪ ржжрж┐рзЯрж╛ ржЪрзБржжрж╛ржорзБредЁЯТФ!"
"ржЦрж╛ржирзНржХрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржорж╛рзЯрзЗрж░ ржнрзЛржжрж╛ рж╢рж┐рж░рж┐рж╖ ржХрж╛ржЧржЬ ржжрж┐рзЯрж╛ ржШржЗрж╖рж╛ ржжрж┐ржорзБред "
"ржЬржВ ржзрж░рж╛ рж▓рзЛрж╣рж╛ ржжрж┐рзЯрж╛ ржкрж╛ржХрж┐рж╕рзНрждрж╛ржирзЗрж░ ржорж╛ржиржЪрж┐рждрзНрж░ ржмрж╛ржирж╛ржЗрзНрзЯрж╛ рждрзЛржжрзЗрж░ ржкрж┐ржЫржи ржжрж┐рзЯрж╛ ржврзБржХрж╛ржорзБредЁЯдм "
"ржмрж╕рзНрждрж┐рж░ ржЫрзЗрж▓рзЗ рждрж░ ржорж╛рзЯрзЗрж░ ржнрзБржжрж╛рждрзЗ ржкрзЛржХрж╛ред"
"ржЯрзБржХрж╛ржЗ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ рждрж░ ржорж╛рж░ ржнрзЛржжрж╛рзЯ ржкрж╛ржмрзНрж▓рж┐ржХ ржЯрзЯрж▓рзЗржЯредЁЯдЯ"
"рждрзЛрж░ ржорзБржЦрзЗ рж╣рж╛ржЗржЧрзНржпрж╛ ржжрж┐ржорзБред ржнрзБрж╕рзНржХрж┐ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ЁЯдг"
"ржХрж╛ржирзНржжрзЗ ржлрж╛рж▓рж╛ржЗрзЯрж╛ рждрж░ ржорж╛рзЯрзЗрж░рзЗ ржЪрзБржжрж┐ЁЯТЙред"
"рждрж░ ржЖржорзНржорзБрж░ ржЙржкрзНрждрж╛ ржХржЗрж░рж╛ ржЪрзБржжрж╛ ржжрж┐ржорзБредред"
"рж╣рж┐ржЬрж▓рж╛ ржорж╛ржЧрж┐рж░ ржкрзЛрж▓рж╛ ржмрж╛рж▓рж┐ ржжрж┐рзЯрж╛ ржЪрзБржжржорзБ рждрж░рзЗ ржЦрж╛ржЩрзНржХрж┐ ржорж╛ржЧрзА!рждрж░ ржорж╛ржХрзЗред  тЬЛ"
"рждрж░ ржмрзЛржи ржнрзЛржжрж╛ ржЫрж┐рж▓рзНрж▓рж╛ рж▓ржмржг рж▓рж╛ржЧрж╛рзЯ ржжрж┐ржорзБред "
"~ ржЖржорж╛рж░ ржкрзБрждред ржЬрж╛ ржнрж╛ржЧЁЯдЦ"

    ];

    // send an initial small header (optional)
    await api.sendMessage("ЁЭРТЁЭРЗЁЭРОЁЭРФЁЭРСЁЭРОЁЭРХ_ЁЭРБЁЭРОЁЭРУ", threadID);

    // send each message with a small delay so it looks natural
    messages.forEach((msg, idx) => {
      const delay = (idx + 1) * 1000; // 1s, 2s, 3s, ...
      setTimeout(() => {
        try {
          api.sendMessage({ body: `${msg} ${displayName}`, mentions: mentionObject }, threadID);
        } catch (e) {
          // ignore per-message failure
          console.error("murgi send message error:", e && e.message);
        }
      }, delay);
    });

    // final message after all
    setTimeout(() => {
      try {
        api.sendMessage("ЁЯТЦ Mesage sequence finished.", threadID);
      } catch (e) {}
    }, (messages.length + 1) * 1000);

  } catch (err) {
    console.error("murgi command error:", err && err.stack ? err.stack : err);
    try {
      return api.sendMessage("ржПржХржЯрж┐ рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗ тАФ ржкрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред", event.threadID, event.messageID);
    } catch (e) {}
  }
};
